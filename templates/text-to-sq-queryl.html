<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªç„¶è¯­è¨€è½¬SQLæŸ¥è¯¢</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 30px;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 20px;
        }

        .input-area {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        .text-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            resize: vertical;
            min-height: 80px;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }

        .text-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .sql-result {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
            max-height: 200px;
            overflow-y: auto;
        }

        .query-results {
            margin-top: 20px;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .results-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 500;
        }

        .results-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #eee;
        }

        .results-table tr:hover {
            background-color: #f8f9fa;
        }

        .no-results {
            text-align: center;
            color: #999;
            padding: 40px;
            font-size: 14px;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #667eea;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .suggestion-tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .suggestion-tag:hover {
            background: #1976d2;
            color: white;
        }

        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 12px;
            border-radius: 6px;
            margin-top: 15px;
            border-left: 4px solid #c62828;
        }

        .success-message {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 12px;
            border-radius: 6px;
            margin-top: 15px;
            border-left: 4px solid #2e7d32;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 20px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="section">
            <h2>ğŸ’¬ è‡ªç„¶è¯­è¨€è½¬SQLæŸ¥è¯¢</h2>
            <div class="input-area">
                <label class="input-label">ç”¨è‡ªç„¶è¯­è¨€æè¿°æ‚¨çš„æŸ¥è¯¢éœ€æ±‚ï¼š</label>
                <textarea class="text-input" id="naturalInput" placeholder="ä¾‹å¦‚ï¼šæŸ¥è¯¢æœ€è¿‘ä¸€ä¸ªæœˆå†…é”€å”®é¢è¶…è¿‡1000å…ƒçš„è®¢å•ï¼ŒæŒ‰é‡‘é¢é™åºæ’åˆ—"></textarea>
            </div>
            
            <div class="suggestions">
                <span class="suggestion-tag" onclick="useSuggestion('æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯')">æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span>
                <span class="suggestion-tag" onclick="useSuggestion('ç»Ÿè®¡æ¯ä¸ªåˆ†ç±»çš„å•†å“æ•°é‡')">ç»Ÿè®¡æ¯ä¸ªåˆ†ç±»çš„å•†å“æ•°é‡</span>
                <span class="suggestion-tag" onclick="useSuggestion('æŸ¥æ‰¾æœ€è¿‘ä¸€å‘¨çš„è®¢å•æ•°æ®')">æŸ¥æ‰¾æœ€è¿‘ä¸€å‘¨çš„è®¢å•æ•°æ®</span>
                <span class="suggestion-tag" onclick="useSuggestion('è®¡ç®—å¹³å‡é”€å”®é¢')">è®¡ç®—å¹³å‡é”€å”®é¢</span>
                <span class="suggestion-tag" onclick="useSuggestion('æ‰¾å‡ºé”€é‡æœ€é«˜çš„äº§å“')">æ‰¾å‡ºé”€é‡æœ€é«˜çš„äº§å“</span>
            </div>

            <button class="btn btn-primary" onclick="convertToSQL()">ğŸ”„ è½¬æ¢ä¸ºSQL</button>
            <button class="btn btn-secondary" onclick="clearInput()">ğŸ—‘ï¸ æ¸…ç©º</button>
        </div>

        <div class="section" id="sqlSection" style="display: none;">
            <h2>ğŸ“ ç”Ÿæˆçš„SQLè¯­å¥</h2>
            <div id="sqlResult" class="sql-result"></div>
            <button class="btn btn-primary" onclick="executeSQL()">â–¶ï¸ æ‰§è¡ŒæŸ¥è¯¢</button>
            <button class="btn btn-secondary" onclick="copySQL()">ğŸ“‹ å¤åˆ¶SQL</button>
        </div>

        <div class="section" id="resultsSection" style="display: none;">
            <h2>ğŸ“Š æŸ¥è¯¢ç»“æœ</h2>
            <div id="queryResults" class="query-results"></div>
            
            <div class="stats" id="statsSection" style="display: none;">
                <div class="stat-item">
                    <div class="stat-number" id="rowCount">0</div>
                    <div class="stat-label">è¿”å›è¡Œæ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="execTime">0</div>
                    <div class="stat-label">æ‰§è¡Œæ—¶é—´(ç§’)</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="affectedRows">0</div>
                    <div class="stat-label">å½±å“è¡Œæ•°</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿçš„SQLè½¬æ¢å‡½æ•°
        function convertToSQL() {
            const input = document.getElementById('naturalInput').value.trim();
            
            if (!input) {
                showError('è¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢éœ€æ±‚');
                return;
            }

            showLoading();

            // æ¨¡æ‹ŸAIè½¬æ¢è¿‡ç¨‹
            setTimeout(() => {
                const sql = generateSQL(input);
                displaySQL(sql);
            }, 1500);
        }

        function generateSQL(naturalText) {
            // ç®€åŒ–çš„è‡ªç„¶è¯­è¨€åˆ°SQLè½¬æ¢é€»è¾‘
            let sql = '';
            
            if (naturalText.includes('æ‰€æœ‰ç”¨æˆ·') || naturalText.includes('ç”¨æˆ·ä¿¡æ¯')) {
                sql = 'SELECT * FROM users ORDER BY created_at DESC LIMIT 100;';
            } else if (naturalText.includes('åˆ†ç±»') && naturalText.includes('å•†å“æ•°é‡')) {
                sql = 'SELECT category, COUNT(*) as product_count FROM products GROUP BY category ORDER BY product_count DESC;';
            } else if (naturalText.includes('æœ€è¿‘ä¸€å‘¨') && naturalText.includes('è®¢å•')) {
                sql = 'SELECT * FROM orders WHERE order_date >= DATE_SUB(NOW(), INTERVAL ä¸Šä¼ ç›®å½•.txt WEEK) ORDER BY order_date DESC;';
            } else if (naturalText.includes('å¹³å‡é”€å”®é¢')) {
                sql = 'SELECT AVG(total_amount) as avg_sales FROM orders WHERE status = "completed";';
            } else if (naturalText.includes('é”€é‡æœ€é«˜') || naturalText.includes('é”€é‡æœ€å¤š')) {
                sql = 'SELECT product_name, SUM(quantity) as total_sales FROM order_items GROUP BY product_name ORDER BY total_sales DESC LIMIT 10;';
            } else if (naturalText.includes('é”€å”®é¢') && naturalText.includes('1000')) {
                sql = 'SELECT * FROM orders WHERE total_amount > 1000 AND order_date >= DATE_SUB(NOW(), INTERVAL ä¸Šä¼ ç›®å½•.txt MONTH) ORDER BY total_amount DESC;';
            } else {
                sql = '-- åŸºäºæ‚¨çš„éœ€æ±‚ç”Ÿæˆçš„SQL\nSELECT * FROM your_table WHERE conditions = "your_conditions" ORDER BY your_column DESC;';
            }
            
            return sql;
        }

        function displaySQL(sql) {
            document.getElementById('sqlSection').style.display = 'block';
            document.getElementById('sqlResult').textContent = sql;
            hideLoading();
            showSuccess('SQLè¯­å¥ç”ŸæˆæˆåŠŸï¼');
        }

        function executeSQL() {
            const sql = document.getElementById('sqlResult').textContent;
            
            showLoading();
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('queryResults').innerHTML = '<div class="loading">æ­£åœ¨æ‰§è¡ŒæŸ¥è¯¢...</div>';

            // æ¨¡æ‹ŸæŸ¥è¯¢æ‰§è¡Œ
            setTimeout(() => {
                const results = generateMockResults(sql);
                displayResults(results);
                hideLoading();
            }, 2000);
        }

        function generateMockResults(sql) {
            // æ ¹æ®SQLç±»å‹ç”Ÿæˆæ¨¡æ‹Ÿç»“æœ
            if (sql.includes('users')) {
                return {
                    columns: ['ç”¨æˆ·ID', 'ç”¨æˆ·å', 'é‚®ç®±', 'æ³¨å†Œæ—¶é—´'],
                    data: [
                        [1, 'å¼ ä¸‰', 'zhangsan@example.com', '2024-01-15 10:30:00'],
                        [2, 'æå››', 'lisi@example.com', '2024-02-20 14:20:00'],
                        [3, 'ç‹äº”', 'wangwu@example.com', '2024-03-10 09:15:00'],
                        [4, 'èµµå…­', 'zhaoliu@example.com', '2024-04-05 16:45:00'],
                        [5, 'å­™ä¸ƒ', 'sunqi@example.com', '2024-05-12 11:30:00']
                    ]
                };
            } else if (sql.includes('category') && sql.includes('COUNT')) {
                return {
                    columns: ['åˆ†ç±»', 'å•†å“æ•°é‡'],
                    data: [
                        ['ç”µå­äº§å“', 156],
                        ['æœè£…', 89],
                        ['å›¾ä¹¦', 234],
                        ['å®¶å±…ç”¨å“', 67],
                        ['è¿åŠ¨ç”¨å“', 123]
                    ]
                };
            } else if (sql.includes('orders')) {
                return {
                    columns: ['è®¢å•ID', 'ç”¨æˆ·ID', 'è®¢å•é‡‘é¢', 'çŠ¶æ€', 'è®¢å•æ—¶é—´'],
                    data: [
                        [1001, 1, 299.99, 'å·²å®Œæˆ', '2024-12-01 10:30:00'],
                        [1002, 2, 599.50, 'å·²å‘è´§', '2024-12-02 14:20:00'],
                        [1003, 3, 1299.00, 'å·²å®Œæˆ', '2024-12-03 09:15:00'],
                        [1004, 4, 89.99, 'å¾…å‘è´§', '2024-12-04 16:45:00'],
                        [1005, 5, 1999.99, 'å·²å®Œæˆ', '2024-12-05 11:30:00']
                    ]
                };
            } else {
                return {
                    columns: ['ç»“æœ'],
                    data: [['æš‚æ— æ•°æ®']]
                };
            }
        }

        function displayResults(results) {
            const resultsContainer = document.getElementById('queryResults');
            
            if (!results || results.data.length === 0) {
                resultsContainer.innerHTML = '<div class="no-results">æš‚æ— æŸ¥è¯¢ç»“æœ</div>';
                return;
            }

            let html = '<table class="results-table">';
            
            // è¡¨å¤´
            html += '<thead><tr>';
            results.columns.forEach(column => {
                html += `<th>${column}</th>`;
            });
            html += '</tr></thead>';
            
            // æ•°æ®è¡Œ
            html += '<tbody>';
            results.data.forEach(row => {
                html += '<tr>';
                row.forEach(cell => {
                    html += `<td>${cell}</td>`;
                });
                html += '</tr>';
            });
            html += '</tbody></table>';

            resultsContainer.innerHTML = html;
            
            // æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
            document.getElementById('statsSection').style.display = 'flex';
            document.getElementById('rowCount').textContent = results.data.length;
            document.getElementById('execTime').textContent = (Math.random() * 2 + 0.5).toFixed(2);
            document.getElementById('affectedRows').textContent = results.data.length;
        }

        function copySQL() {
            const sql = document.getElementById('sqlResult').textContent;
            navigator.clipboard.writeText(sql).then(() => {
                showSuccess('SQLè¯­å¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            }).catch(() => {
                showError('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
            });
        }

        function clearInput() {
            document.getElementById('naturalInput').value = '';
            document.getElementById('sqlSection').style.display = 'none';
            document.getElementById('resultsSection').style.display = 'none';
        }

        function useSuggestion(text) {
            document.getElementById('naturalInput').value = text;
            convertToSQL();
        }

        function showLoading() {
            const sqlSection = document.getElementById('sqlSection');
            if (sqlSection.style.display === 'none') {
                sqlSection.style.display = 'block';
                document.getElementById('sqlResult').innerHTML = '<div class="loading">æ­£åœ¨ç”ŸæˆSQL...</div>';
            }
        }

        function hideLoading() {
            const loadingElements = document.querySelectorAll('.loading');
            loadingElements.forEach(el => el.remove());
        }

        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = message;
            
            const section = document.querySelector('.section');
            section.appendChild(errorDiv);
            
            setTimeout(() => {
                errorDiv.remove();
            }, 3000);
        }

        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.textContent = message;
            
            const section = document.querySelector('.section');
            section.appendChild(successDiv);
            
            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('è‡ªç„¶è¯­è¨€è½¬SQLæŸ¥è¯¢é¡µé¢å·²åŠ è½½');
        });
    </script>
</body>
</html>