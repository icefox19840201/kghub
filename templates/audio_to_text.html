<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ³é¢‘è½¬æ–‡æœ¬ - çŸ¥è¯†åº“ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 16px;
        }

        .main-content {
            padding: 30px;
        }

        .upload-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 20px;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .audio-upload-area {
            border: 3px dashed #3498db;
            border-radius: 12px;
            padding: 60px 40px;
            text-align: center;
            background: #f8fbff;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .audio-upload-area:hover {
            background: #e8f4ff;
            border-color: #2980b9;
            transform: translateY(-2px);
        }

        .audio-upload-area.dragover {
            background: #d6e9ff;
            border-color: #1f4e79;
            transform: scale(1.02);
        }

        .audio-icon {
            font-size: 64px;
            color: #3498db;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        .upload-text {
            font-size: 18px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .upload-hint {
            color: #666;
            font-size: 14px;
            line-height: 1.5;
        }

        .file-input {
            display: none;
        }

        .audio-player {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            display: none;
        }

        .audio-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .play-btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .play-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
        }

        .audio-info {
            flex: 1;
        }

        .audio-name {
            font-weight: 500;
            color: #333;
            margin-bottom: 5px;
        }

        .audio-duration {
            color: #666;
            font-size: 14px;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2980b9);
            width: 0%;
            transition: width 0.1s ease;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #666;
        }

        .settings-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        .form-select, .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-select:focus, .form-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .recognition-section {
            margin: 30px 0;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .transcription-result {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
            display: none;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e2e8f0;
        }

        .result-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        .confidence-score {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .transcription-text {
            background: #f8f9fa;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 20px;
            min-height: 200px;
            font-size: 16px;
            line-height: 1.6;
            color: #333;
            font-family: inherit;
            resize: vertical;
            width: 100%;
        }

        .text-stats {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
            font-size: 14px;
            color: #666;
        }

        .audio-segments {
            margin-top: 20px;
        }

        .segment {
            background: #f8f9fa;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .segment-time {
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            min-width: 80px;
            text-align: center;
        }

        .segment-text {
            flex: 1;
            color: #333;
            line-height: 1.5;
        }

        .segment-confidence {
            color: #28a745;
            font-size: 12px;
            font-weight: 500;
        }

        .processing-status {
            text-align: center;
            padding: 40px;
            display: none;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .status-text {
            color: #666;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .progress-info {
            color: #999;
            font-size: 14px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .metadata-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
            display: none;
        }

        .metadata-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.3s ease;
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .file-list {
            margin-top: 20px;
        }

        .file-item {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .file-item:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-1px);
        }

        .file-icon {
            font-size: 32px;
            color: #3498db;
            min-width: 40px;
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-weight: 500;
            color: #333;
            margin-bottom: 5px;
        }

        .file-details {
            color: #666;
            font-size: 14px;
        }

        .file-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            min-width: 80px;
            text-align: center;
        }

        .status-pending {
            background: #fef3cd;
            color: #856404;
        }

        .status-processing {
            background: #cce5ff;
            color: #004085;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
        }

        .batch-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .stats {
            display: flex;
            gap: 20px;
            align-items: center;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #3498db;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 2px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .language-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: #e8f4ff;
            color: #2980b9;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .confidence-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: #e6f4ea;
            color: #137333;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .warning-message {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #28a745;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .audio-upload-area {
                padding: 40px 20px;
            }
            
            .settings-grid, .metadata-grid {
                grid-template-columns: 1fr;
            }
            
            .file-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .action-buttons, .batch-actions {
                flex-direction: column;
            }
            
            .stats {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .segment {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸµ éŸ³é¢‘è½¬æ–‡æœ¬</h1>
            <p>å°†è¯­éŸ³å†…å®¹æ™ºèƒ½è½¬æ¢ä¸ºæ–‡æœ¬å¹¶å¯¼å…¥çŸ¥è¯†åº“</p>
        </div>

        <div class="main-content">
            <!-- éŸ³é¢‘ä¸Šä¼ åŒºåŸŸ -->
            <div class="upload-section">
                <h2 class="section-title">
                    <span>ğŸ¤</span>
                    <span>ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶</span>
                </h2>
                <div class="audio-upload-area" id="uploadArea">
                    <div class="audio-icon">ğŸµ</div>
                    <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½éŸ³é¢‘æ–‡ä»¶åˆ°æ­¤å¤„</div>
                    <div class="upload-hint">
                        æ”¯æŒ MP3ã€WAVã€M4Aã€FLAC ç­‰å¸¸è§éŸ³é¢‘æ ¼å¼<br>
                        å•ä¸ªæ–‡ä»¶æœ€å¤§æ”¯æŒ 100MBï¼Œæ”¯æŒæ‰¹é‡ä¸Šä¼ 
                    </div>
                </div>
                <input type="file" id="audioInput" class="file-input" multiple accept=".mp3,.wav,.m4a,.flac,.aac,.ogg">
            </div>

            <!-- éŸ³é¢‘æ’­æ”¾å™¨ -->
            <div class="audio-player" id="audioPlayer">
                <div class="audio-controls">
                    <button class="play-btn" id="playBtn">â–¶ï¸</button>
                    <div class="audio-info">
                        <div class="audio-name" id="audioName">æœªé€‰æ‹©éŸ³é¢‘æ–‡ä»¶</div>
                        <div class="audio-duration" id="audioDuration">æ—¶é•¿: 00:00</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="audioProgress"></div>
                </div>
                <div class="time-display">
                    <span id="currentTime">00:00</span>
                    <span id="totalTime">00:00</span>
                </div>
            </div>

            <!-- è¯†åˆ«è®¾ç½® -->
            <div class="settings-section">
                <h3 class="section-title">
                    <span>âš™ï¸</span>
                    <span>è¯­éŸ³è¯†åˆ«è®¾ç½®</span>
                </h3>
                <div class="settings-grid">
                    <div class="form-group">
                        <label class="form-label">è¯†åˆ«è¯­è¨€</label>
                        <select class="form-select" id="recognitionLanguage">
                            <option value="zh-CN">ä¸­æ–‡ï¼ˆæ™®é€šè¯ï¼‰</option>
                            <option value="zh-TW">ä¸­æ–‡ï¼ˆç¹ä½“ï¼‰</option>
                            <option value="en-US">è‹±è¯­ï¼ˆç¾å›½ï¼‰</option>
                            <option value="en-GB">è‹±è¯­ï¼ˆè‹±å›½ï¼‰</option>
                            <option value="ja-JP">æ—¥è¯­</option>
                            <option value="ko-KR">éŸ©è¯­</option>
                            <option value="fr-FR">æ³•è¯­</option>
                            <option value="de-DE">å¾·è¯­</option>
                            <option value="es-ES">è¥¿ç­ç‰™è¯­</option>
                            <option value="auto">è‡ªåŠ¨æ£€æµ‹</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">è¯†åˆ«æ¨¡å¼</label>
                        <select class="form-select" id="recognitionMode">
                            <option value="real-time">å®æ—¶è¯†åˆ«</option>
                            <option value="batch">æ‰¹é‡è¯†åˆ«</option>
                            <option value="enhanced">å¢å¼ºè¯†åˆ«ï¼ˆæ›´å‡†ç¡®ï¼‰</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">éŸ³é¢‘è´¨é‡</label>
                        <select class="form-select" id="audioQuality">
                            <option value="high">é«˜è´¨é‡ï¼ˆ16kHz+ï¼‰</option>
                            <option value="medium">æ ‡å‡†è´¨é‡ï¼ˆ8kHz+ï¼‰</option>
                            <option value="low">ä½è´¨é‡ï¼ˆç”µè¯å½•éŸ³ï¼‰</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">è¯´è¯äººè¯†åˆ«</label>
                        <select class="form-select" id="speakerRecognition">
                            <option value="disabled">å…³é—­</option>
                            <option value="enabled">å¼€å¯</option>
                            <option value="auto">è‡ªåŠ¨æ£€æµ‹</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- è¯†åˆ«æ§åˆ¶ -->
            <div class="recognition-section">
                <div class="action-buttons">
                    <button class="btn btn-primary" id="startRecognition" onclick="startRecognition()">
                        <span>ğŸ¯</span> å¼€å§‹è¯†åˆ«
                    </button>
                    <button class="btn btn-warning" id="pauseRecognition" onclick="pauseRecognition()" disabled>
                        <span>â¸ï¸</span> æš‚åœè¯†åˆ«
                    </button>
                    <button class="btn btn-danger" id="stopRecognition" onclick="stopRecognition()" disabled>
                        <span>â¹ï¸</span> åœæ­¢è¯†åˆ«
                    </button>
                    <button class="btn btn-secondary" onclick="clearResult()">
                        <span>ğŸ—‘ï¸</span> æ¸…ç©ºç»“æœ
                    </button>
                </div>
            </div>

            <!-- å¤„ç†çŠ¶æ€ -->
            <div class="processing-status" id="processingStatus">
                <div class="spinner"></div>
                <div class="status-text" id="statusText">æ­£åœ¨è¯†åˆ«éŸ³é¢‘å†…å®¹...</div>
                <div class="progress-info" id="progressInfo">è¿›åº¦: 0%</div>
            </div>

            <!-- è½¬å½•ç»“æœ -->
            <div class="transcription-result" id="transcriptionResult">
                <div class="result-header">
                    <h3 class="result-title">ğŸ“ è½¬å½•ç»“æœ</h3>
                    <div class="confidence-score" id="confidenceScore">ç½®ä¿¡åº¦: 95%</div>
                </div>
                <textarea class="transcription-text" id="transcriptionText" placeholder="è¯†åˆ«ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º..."></textarea>
                <div class="text-stats">
                    <span>å­—ç¬¦æ•°: <strong id="charCount">0</strong></span>
                    <span>è¯æ•°: <strong id="wordCount">0</strong></span>
                    <span>æ—¶é•¿: <strong id="durationText">0</strong>ç§’</span>
                    <span class="language-indicator">ğŸŒ <span id="detectedLanguage">ä¸­æ–‡</span></span>
                    <span class="confidence-indicator">ğŸ¯ <span id="confidenceText">é«˜ç½®ä¿¡åº¦</span></span>
                </div>
            </div>

            <!-- åˆ†æ®µç»“æœ -->
            <div class="audio-segments" id="audioSegments" style="display: none;">
                <h3 class="section-title">
                    <span>â±ï¸</span>
                    <span>åˆ†æ®µè¯†åˆ«ç»“æœ</span>
                </h3>
                <div id="segmentsList">
                    <!-- åŠ¨æ€ç”Ÿæˆåˆ†æ®µç»“æœ -->
                </div>
            </div>

            <!-- å…ƒæ•°æ®é…ç½® -->
            <div class="metadata-section" id="metadataSection">
                <h3 class="section-title">
                    <span>ğŸ“‹</span>
                    <span>æ–‡æ¡£å…ƒæ•°æ®</span>
                </h3>
                <div class="metadata-grid">
                    <div class="form-group">
                        <label class="form-label">æ–‡æ¡£æ ‡é¢˜</label>
                        <input type="text" class="form-input" id="docTitle" placeholder="éŸ³é¢‘è½¬å½•æ–‡æ¡£">
                    </div>
                    <div class="form-group">
                        <label class="form-label">æ–‡æ¡£åˆ†ç±»</label>
                        <select class="form-select" id="docCategory">
                            <option value="ä¼šè®®è®°å½•">ä¼šè®®è®°å½•</option>
                            <option value="è®¿è°ˆè®°å½•">è®¿è°ˆè®°å½•</option>
                            <option value="è®²åº§èµ„æ–™">è®²åº§èµ„æ–™</option>
                            <option value="åŸ¹è®­èµ„æ–™">åŸ¹è®­èµ„æ–™</option>
                            <option value="è¯­éŸ³ç¬”è®°">è¯­éŸ³ç¬”è®°</option>
                            <option value="å…¶ä»–">å…¶ä»–</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">æ ‡ç­¾ï¼ˆé€—å·åˆ†éš”ï¼‰</label>
                        <input type="text" class="form-input" id="docTags" placeholder="è¯­éŸ³è¯†åˆ«, ä¼šè®®, è½¬å½•">
                    </div>
                    <div class="form-group">
                        <label class="form-label">é‡è¦æ€§</label>
                        <select class="form-select" id="docPriority">
                            <option value="low">ä½</option>
                            <option value="medium" selected>ä¸­</option>
                            <option value="high">é«˜</option>
                        </select>
                    </div>
                    <div class="form-group" style="grid-column: 1 / -1;">
                        <label class="form-label">æ–‡æ¡£æè¿°</label>
                        <textarea class="form-textarea" id="docDescription" placeholder="ç®€è¦æè¿°è¿™ä¸ªéŸ³é¢‘è½¬å½•æ–‡æ¡£çš„å†…å®¹å’Œç”¨é€”..."></textarea>
                    </div>
                </div>
            </div>

            <!-- éŸ³é¢‘æ–‡ä»¶åˆ—è¡¨ -->
            <div class="file-list" id="fileList" style="display: none;">
                <h3 class="section-title">
                    <span>ğŸ“</span>
                    <span>éŸ³é¢‘æ–‡ä»¶åˆ—è¡¨</span>
                </h3>
                <div id="audioFilesList">
                    <!-- åŠ¨æ€ç”Ÿæˆæ–‡ä»¶åˆ—è¡¨ -->
                </div>
                <div class="batch-actions">
                    <button class="btn btn-primary" onclick="batchProcess()">
                        <span>ğŸ”„</span> æ‰¹é‡å¤„ç†
                    </button>
                    <button class="btn btn-secondary" onclick="clearAllFiles()">
                        <span>ğŸ—‘ï¸</span> æ¸…ç©ºåˆ—è¡¨
                    </button>
                </div>
            </div>

            <!-- å…¥åº“æ“ä½œ -->
            <div class="action-buttons" id="importActions" style="display: none;">
                <button class="btn btn-success" onclick="importToKnowledgeBase()">
                    <span>ğŸ“š</span> å¯¼å…¥çŸ¥è¯†åº“
                </button>
                <button class="btn btn-primary" onclick="downloadText()">
                    <span>ğŸ’¾</span> ä¸‹è½½æ–‡æœ¬
                </button>
                <button class="btn btn-secondary" onclick="copyText()">
                    <span>ğŸ“‹</span> å¤åˆ¶æ–‡æœ¬
                </button>
            </div>

            <!-- ç»Ÿè®¡ä¿¡æ¯ -->
            <div class="stats" id="statsInfo" style="display: none;">
                <div class="stat-item">
                    <div class="stat-number" id="totalFiles">0</div>
                    <div class="stat-label">éŸ³é¢‘æ–‡ä»¶</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalDuration">0</div>
                    <div class="stat-label">æ€»æ—¶é•¿(åˆ†)</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="processedFiles">0</div>
                    <div class="stat-label">å·²å¤„ç†</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="avgConfidence">0%</div>
                    <div class="stat-label">å¹³å‡ç½®ä¿¡åº¦</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let audioFiles = [];
        let currentAudio = null;
        let isPlaying = false;
        let isRecording = false;
        let recognition = null;
        let audioContext = null;
        let mediaRecorder = null;
        let audioChunks = [];
        let transcriptionResult = '';
        let audioSegments = [];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            initializeAudioContext();
        });

        function setupEventListeners() {
            const uploadArea = document.getElementById('uploadArea');
            const audioInput = document.getElementById('audioInput');

            // æ–‡ä»¶ä¸Šä¼ 
            uploadArea.addEventListener('click', () => audioInput.click());
            audioInput.addEventListener('change', handleAudioSelect);
            
            // æ‹–æ‹½ä¸Šä¼ 
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('drop', handleAudioDrop);
            uploadArea.addEventListener('dragleave', handleDragLeave);

            // éŸ³é¢‘æ’­æ”¾æ§åˆ¶
            document.getElementById('playBtn').addEventListener('click', togglePlayPause);
        }

        function initializeAudioContext() {
            // åˆå§‹åŒ–Web Audio API
            window.AudioContext = window.AudioContext || window.webkitAudioContext;
            audioContext = new AudioContext();
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('dragover');
        }

        function handleAudioDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            
            const files = Array.from(e.dataTransfer.files);
            processAudioFiles(files);
        }

        function handleAudioSelect(e) {
            const files = Array.from(e.target.files);
            processAudioFiles(files);
        }

        function processAudioFiles(files) {
            const validFiles = files.filter(file => {
                const validTypes = ['audio/mpeg', 'audio/wav', 'audio/x-wav', 'audio/mp4', 'audio/flac', 'audio/ogg', 'audio/aac'];
                const maxSize = 100 * 1024 * 1024; // 100MB
                
                return validTypes.includes(file.type) && file.size <= maxSize;
            });

            if (validFiles.length !== files.length) {
                alert(`éƒ¨åˆ†æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒæˆ–è¶…è¿‡100MBé™åˆ¶ï¼Œå·²è¿‡æ»¤ ${files.length - validFiles.length} ä¸ªæ–‡ä»¶`);
            }

            validFiles.forEach(file => {
                const fileData = {
                    id: Date.now() + Math.random(),
                    file: file,
                    name: file.name,
                    size: file.size,
                    type: file.type,
                    duration: 0,
                    status: 'pending',
                    progress: 0,
                    transcription: '',
                    confidence: 0,
                    language: 'zh-CN'
                };
                
                audioFiles.push(fileData);
                
                // è·å–éŸ³é¢‘æ—¶é•¿
                getAudioDuration(file, (duration) => {
                    fileData.duration = duration;
                    renderAudioList();
                    updateStats();
                });
            });

            if (audioFiles.length > 0) {
                document.getElementById('fileList').style.display = 'block';
                document.getElementById('statsInfo').style.display = 'flex';
                renderAudioList();
                updateStats();
                
                // è‡ªåŠ¨åŠ è½½ç¬¬ä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶
                if (audioFiles.length === 1) {
                    loadAudioFile(audioFiles[0]);
                }
            }
        }

        function getAudioDuration(file, callback) {
            const audio = new Audio();
            audio.src = URL.createObjectURL(file);
            audio.addEventListener('loadedmetadata', () => {
                callback(Math.floor(audio.duration));
                URL.revokeObjectURL(audio.src);
            });
            audio.addEventListener('error', () => {
                callback(0);
                URL.revokeObjectURL(audio.src);
            });
        }

        function loadAudioFile(fileData) {
            currentAudio = fileData;
            
            document.getElementById('audioName').textContent = fileData.name;
            document.getElementById('audioDuration').textContent = `æ—¶é•¿: ${formatTime(fileData.duration)}`;
            document.getElementById('totalTime').textContent = formatTime(fileData.duration);
            document.getElementById('audioPlayer').style.display = 'block';
            
            // å¦‚æœæœ‰è½¬å½•ç»“æœï¼Œæ˜¾ç¤ºå‡ºæ¥
            if (fileData.transcription) {
                document.getElementById('transcriptionText').value = fileData.transcription;
                document.getElementById('transcriptionResult').style.display = 'block';
                document.getElementById('metadataSection').style.display = 'block';
                document.getElementById('importActions').style.display = 'flex';
                
                updateTextStats(fileData.transcription);
                document.getElementById('confidenceScore').textContent = `ç½®ä¿¡åº¦: ${fileData.confidence}%`;
            }
        }

        function togglePlayPause() {
            if (!currentAudio) return;

            const playBtn = document.getElementById('playBtn');
            const audio = new Audio();
            audio.src = URL.createObjectURL(currentAudio.file);

            if (!isPlaying) {
                audio.play();
                playBtn.textContent = 'â¸ï¸';
                isPlaying = true;
                
                // æ¨¡æ‹Ÿæ’­æ”¾è¿›åº¦
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 1;
                    const progressPercent = (progress / currentAudio.duration) * 100;
                    document.getElementById('audioProgress').style.width = progressPercent + '%';
                    document.getElementById('currentTime').textContent = formatTime(progress);
                    
                    if (progress >= currentAudio.duration) {
                        clearInterval(interval);
                        playBtn.textContent = 'â–¶ï¸';
                        isPlaying = false;
                        document.getElementById('audioProgress').style.width = '0%';
                        document.getElementById('currentTime').textContent = '00:00';
                    }
                }, 1000);
            } else {
                playBtn.textContent = 'â–¶ï¸';
                isPlaying = false;
            }
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function startRecognition() {
            if (!currentAudio) {
                alert('è¯·å…ˆé€‰æ‹©éŸ³é¢‘æ–‡ä»¶');
                return;
            }

            // ç¦ç”¨å¼€å§‹æŒ‰é’®ï¼Œå¯ç”¨æš‚åœå’Œåœæ­¢æŒ‰é’®
            document.getElementById('startRecognition').disabled = true;
            document.getElementById('pauseRecognition').disabled = false;
            document.getElementById('stopRecognition').disabled = false;

            // æ˜¾ç¤ºå¤„ç†çŠ¶æ€
            document.getElementById('processingStatus').style.display = 'block';
            document.getElementById('statusText').textContent = 'æ­£åœ¨è¯†åˆ«éŸ³é¢‘å†…å®¹...';

            // æ¨¡æ‹Ÿè¯­éŸ³è¯†åˆ«è¿‡ç¨‹
            simulateSpeechRecognition();
        }

        function simulateSpeechRecognition() {
            const language = document.getElementById('recognitionLanguage').value;
            const mode = document.getElementById('recognitionMode').value;
            
            let progress = 0;
            const totalSteps = mode === 'enhanced' ? 100 : 60;
            
            const recognitionInterval = setInterval(() => {
                progress += Math.random() * 3 + 1;
                if (progress > totalSteps) progress = totalSteps;
                
                const progressPercent = Math.floor((progress / totalSteps) * 100);
                document.getElementById('progressInfo').textContent = `è¿›åº¦: ${progressPercent}%`;
                
                if (progress >= totalSteps) {
                    clearInterval(recognitionInterval);
                    completeRecognition();
                }
            }, 200);
        }

        function completeRecognition() {
            // ç”Ÿæˆæ¨¡æ‹Ÿçš„è½¬å½•ç»“æœ
            const language = document.getElementById('recognitionLanguage').value;
            const mode = document.getElementById('recognitionMode').value;
            
            const sampleTexts = {
                'zh-CN': 'è¿™æ˜¯ä¸­æ–‡æ™®é€šè¯çš„è¯­éŸ³è¯†åˆ«æµ‹è¯•ç»“æœã€‚ç³»ç»Ÿæ­£åœ¨å°†æ‚¨çš„è¯­éŸ³å†…å®¹è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼ã€‚',
                'zh-TW': 'é€™æ˜¯ä¸­æ–‡ç¹é«”çš„èªéŸ³è­˜åˆ¥æ¸¬è©¦çµæœã€‚ç³»çµ±æ­£åœ¨å°‡æ‚¨çš„èªéŸ³å…§å®¹è½‰æ›ç‚ºæ–‡æœ¬æ ¼å¼ã€‚',
                'en-US': 'This is a speech recognition test result in American English. The system is converting your speech content into text format.',
                'en-GB': 'This is a speech recognition test result in British English. The system is converting your speech content into text format.',
                'ja-JP': 'ã“ã‚Œã¯æ—¥æœ¬èªã®éŸ³å£°èªè­˜ãƒ†ã‚¹ãƒˆçµæœã§ã™ã€‚ã‚·ã‚¹ãƒ†ãƒ ã¯ã‚ãªãŸã®éŸ³å£°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ã«å¤‰æ›ã—ã¦ã„ã¾ã™ã€‚',
                'ko-KR': 'ì´ê²ƒì€ í•œêµ­ì–´ ìŒì„± ì¸ì‹ í…ŒìŠ¤íŠ¸ ê²°ê³¼ì…ë‹ˆë‹¤. ì‹œìŠ¤í…œì€ ìŒì„± ì½˜í…ì¸ ë¥¼ í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.',
                'auto': 'è¿™æ˜¯è‡ªåŠ¨è¯­è¨€æ£€æµ‹çš„è¯­éŸ³è¯†åˆ«ç»“æœã€‚ç³»ç»Ÿä¼šæ ¹æ®éŸ³é¢‘å†…å®¹è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„è¯†åˆ«è¯­è¨€ã€‚'
            };

            const confidence = mode === 'enhanced' ? 95 : mode === 'real-time' ? 85 : 90;
            const text = sampleTexts[language] || sampleTexts['zh-CN'];
            
            transcriptionResult = text;
            currentAudio.transcription = text;
            currentAudio.confidence = confidence;
            currentAudio.language = language;
            
            // æ˜¾ç¤ºç»“æœ
            document.getElementById('transcriptionText').value = text;
            document.getElementById('transcriptionResult').style.display = 'block';
            document.getElementById('metadataSection').style.display = 'block';
            document.getElementById('importActions').style.display = 'flex';
            document.getElementById('processingStatus').style.display = 'none';
            
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateTextStats(text);
            document.getElementById('confidenceScore').textContent = `ç½®ä¿¡åº¦: ${confidence}%`;
            document.getElementById('detectedLanguage').textContent = getLanguageName(language);
            document.getElementById('confidenceText').textContent = getConfidenceText(confidence);
            
            // æ›´æ–°éŸ³é¢‘æ–‡ä»¶çŠ¶æ€
            currentAudio.status = 'completed';
            renderAudioList();
            updateStats();
            
            // é‡æ–°å¯ç”¨æŒ‰é’®
            document.getElementById('startRecognition').disabled = false;
            document.getElementById('pauseRecognition').disabled = true;
            document.getElementById('stopRecognition').disabled = true;
            
            showSuccess('è¯­éŸ³è¯†åˆ«å®Œæˆï¼');
        }

        function pauseRecognition() {
            // æ¨¡æ‹Ÿæš‚åœè¯†åˆ«
            document.getElementById('statusText').textContent = 'è¯†åˆ«å·²æš‚åœ';
            document.getElementById('pauseRecognition').disabled = true;
            document.getElementById('startRecognition').disabled = false;
        }

        function stopRecognition() {
            // æ¨¡æ‹Ÿåœæ­¢è¯†åˆ«
            document.getElementById('processingStatus').style.display = 'none';
            document.getElementById('startRecognition').disabled = false;
            document.getElementById('pauseRecognition').disabled = true;
            document.getElementById('stopRecognition').disabled = true;
        }

        function clearResult() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºè¯†åˆ«ç»“æœå—ï¼Ÿ')) {
                document.getElementById('transcriptionText').value = '';
                document.getElementById('transcriptionResult').style.display = 'none';
                document.getElementById('metadataSection').style.display = 'none';
                document.getElementById('importActions').style.display = 'none';
                document.getElementById('audioSegments').style.display = 'none';
                
                if (currentAudio) {
                    currentAudio.transcription = '';
                    currentAudio.confidence = 0;
                    currentAudio.status = 'pending';
                    renderAudioList();
                    updateStats();
                }
                
                transcriptionResult = '';
                audioSegments = [];
            }
        }

        function updateTextStats(text) {
            const charCount = text.length;
            const wordCount = text.trim().split(/\s+/).filter(word => word.length > 0).length;
            
            document.getElementById('charCount').textContent = charCount;
            document.getElementById('wordCount').textContent = wordCount;
            document.getElementById('durationText').textContent = currentAudio ? currentAudio.duration : 0;
        }

        function getLanguageName(code) {
            const languages = {
                'zh-CN': 'ä¸­æ–‡ï¼ˆæ™®é€šè¯ï¼‰',
                'zh-TW': 'ä¸­æ–‡ï¼ˆç¹ä½“ï¼‰',
                'en-US': 'è‹±è¯­ï¼ˆç¾å›½ï¼‰',
                'en-GB': 'è‹±è¯­ï¼ˆè‹±å›½ï¼‰',
                'ja-JP': 'æ—¥è¯­',
                'ko-KR': 'éŸ©è¯­',
                'auto': 'è‡ªåŠ¨æ£€æµ‹'
            };
            return languages[code] || code;
        }

        function getConfidenceText(score) {
            if (score >= 95) return 'æé«˜ç½®ä¿¡åº¦';
            if (score >= 90) return 'é«˜ç½®ä¿¡åº¦';
            if (score >= 80) return 'ä¸­ç­‰ç½®ä¿¡åº¦';
            if (score >= 70) return 'ä½ç½®ä¿¡åº¦';
            return 'éœ€è¦æ ¡å¯¹';
        }

        function renderAudioList() {
            const audioFilesList = document.getElementById('audioFilesList');
            
            if (audioFiles.length === 0) {
                audioFilesList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸµ</div>
                        <h3>æš‚æ— éŸ³é¢‘æ–‡ä»¶</h3>
                        <p>è¯·ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶å¼€å§‹è½¬å½•</p>
                    </div>
                `;
                return;
            }

            audioFilesList.innerHTML = audioFiles.map(file => `
                <div class="file-item" onclick="loadAudioFile(${JSON.stringify(file).replace(/"/g, '&quot;')})" style="cursor: pointer;">
                    <div class="file-icon">ğŸµ</div>
                    <div class="file-info">
                        <div class="file-name">${file.name}</div>
                        <div class="file-details">
                            æ—¶é•¿: ${formatTime(file.duration)} | å¤§å°: ${formatFileSize(file.size)} | 
                            <span class="language-indicator">ğŸŒ ${getLanguageName(file.language)}</span>
                        </div>
                    </div>
                    <div class="file-status status-${file.status}">
                        ${getStatusText(file.status)}
                    </div>
                    ${file.confidence > 0 ? `<span class="confidence-indicator">ğŸ¯ ${file.confidence}%</span>` : ''}
                </div>
            `).join('');
        }

        function getStatusText(status) {
            const statusMap = {
                'pending': 'å¾…å¤„ç†',
                'processing': 'å¤„ç†ä¸­',
                'completed': 'å·²å®Œæˆ',
                'error': 'é”™è¯¯'
            };
            return statusMap[status] || 'æœªçŸ¥';
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        }

        function updateStats() {
            const totalFiles = audioFiles.length;
            const totalDuration = audioFiles.reduce((sum, file) => sum + file.duration, 0);
            const processedFiles = audioFiles.filter(file => file.status === 'completed').length;
            const avgConfidence = processedFiles > 0 ? 
                Math.round(audioFiles.filter(file => file.status === 'completed')
                    .reduce((sum, file) => sum + file.confidence, 0) / processedFiles) : 0;

            document.getElementById('totalFiles').textContent = totalFiles;
            document.getElementById('totalDuration').textContent = Math.round(totalDuration / 60);
            document.getElementById('processedFiles').textContent = processedFiles;
            document.getElementById('avgConfidence').textContent = avgConfidence + '%';
        }

        function batchProcess() {
            const pendingFiles = audioFiles.filter(file => file.status === 'pending');
            
            if (pendingFiles.length === 0) {
                alert('æ²¡æœ‰å¾…å¤„ç†çš„éŸ³é¢‘æ–‡ä»¶');
                return;
            }

            if (confirm(`ç¡®å®šè¦æ‰¹é‡å¤„ç† ${pendingFiles.length} ä¸ªéŸ³é¢‘æ–‡ä»¶å—ï¼Ÿ`)) {
                processNextFile(0);
            }
        }

        function processNextFile(index) {
            const pendingFiles = audioFiles.filter(file => file.status === 'pending');
            
            if (index >= pendingFiles.length) {
                showSuccess('æ‰¹é‡å¤„ç†å®Œæˆï¼');
                return;
            }

            const file = pendingFiles[index];
            loadAudioFile(file);
            
            // æ¨¡æ‹Ÿå¤„ç†è¿‡ç¨‹
            file.status = 'processing';
            renderAudioList();
            
            setTimeout(() => {
                simulateSpeechRecognitionForFile(file);
                
                setTimeout(() => {
                    processNextFile(index + 1);
                }, 2000);
            }, 1000);
        }

        function simulateSpeechRecognitionForFile(file) {
            const language = document.getElementById('recognitionLanguage').value;
            const mode = document.getElementById('recognitionMode').value;
            
            const confidence = mode === 'enhanced' ? 95 : mode === 'real-time' ? 85 : 90;
            
            const sampleTexts = {
                'zh-CN': 'è¿™æ˜¯ä¸­æ–‡æ™®é€šè¯çš„è¯­éŸ³è¯†åˆ«æµ‹è¯•ç»“æœã€‚',
                'en-US': 'This is a speech recognition test result in American English.',
                'ja-JP': 'ã“ã‚Œã¯æ—¥æœ¬èªã®éŸ³å£°èªè­˜ãƒ†ã‚¹ãƒˆçµæœã§ã™ã€‚',
                'ko-KR': 'ì´ê²ƒì€ í•œêµ­ì–´ ìŒì„± ì¸ì‹ í…ŒìŠ¤íŠ¸ ê²°ê³¼ì…ë‹ˆë‹¤.',
                'auto': 'è¿™æ˜¯è‡ªåŠ¨è¯­è¨€æ£€æµ‹çš„è¯­éŸ³è¯†åˆ«ç»“æœã€‚'
            };

            file.transcription = sampleTexts[language] || sampleTexts['zh-CN'];
            file.confidence = confidence;
            file.language = language;
            file.status = 'completed';
            
            renderAudioList();
            updateStats();
        }

        function clearAllFiles() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰éŸ³é¢‘æ–‡ä»¶å—ï¼Ÿ')) {
                audioFiles = [];
                currentAudio = null;
                transcriptionResult = '';
                
                document.getElementById('fileList').style.display = 'none';
                document.getElementById('statsInfo').style.display = 'none';
                document.getElementById('audioPlayer').style.display = 'none';
                document.getElementById('transcriptionResult').style.display = 'none';
                document.getElementById('metadataSection').style.display = 'none';
                document.getElementById('importActions').style.display = 'none';
                
                renderAudioList();
            }
        }

        function importToKnowledgeBase() {
            if (!currentAudio || !currentAudio.transcription) {
                alert('è¯·å…ˆå®Œæˆè¯­éŸ³è¯†åˆ«');
                return;
            }

            const title = document.getElementById('docTitle').value || 'éŸ³é¢‘è½¬å½•æ–‡æ¡£';
            const category = document.getElementById('docCategory').value;
            const tags = document.getElementById('docTags').value.split(',').map(tag => tag.trim()).filter(tag => tag);
            const priority = document.getElementById('docPriority').value;
            const description = document.getElementById('docDescription').value;

            if (!title.trim()) {
                alert('è¯·è¾“å…¥æ–‡æ¡£æ ‡é¢˜');
                return;
            }

            // æ¨¡æ‹Ÿå¯¼å…¥çŸ¥è¯†åº“
            const docData = {
                title: title,
                content: currentAudio.transcription,
                category: category,
                tags: tags,
                priority: priority,
                description: description,
                source: 'audio_transcription',
                originalFile: currentAudio.name,
                duration: currentAudio.duration,
                confidence: currentAudio.confidence,
                language: currentAudio.language,
                createTime: new Date().toISOString()
            };

            // æ˜¾ç¤ºå¯¼å…¥è¿›åº¦
            showImportProgress(docData);
        }

        function showImportProgress(docData) {
            const statusDiv = document.createElement('div');
            statusDiv.className = 'success-message';
            statusDiv.innerHTML = `
                <strong>ğŸ“š æ­£åœ¨å¯¼å…¥çŸ¥è¯†åº“...</strong><br>
                æ–‡æ¡£æ ‡é¢˜: ${docData.title}<br>
                åˆ†ç±»: ${docData.category}<br>
                ç½®ä¿¡åº¦: ${docData.confidence}%
            `;
            
            const firstSection = document.querySelector('.upload-section');
            firstSection.parentNode.insertBefore(statusDiv, firstSection);
            
            // æ¨¡æ‹Ÿå¯¼å…¥è¿‡ç¨‹
            let progress = 0;
            const importInterval = setInterval(() => {
                progress += 20;
                if (progress >= 100) {
                    clearInterval(importInterval);
                    statusDiv.innerHTML = `
                        <strong>âœ… å¯¼å…¥æˆåŠŸï¼</strong><br>
                        æ–‡æ¡£ "${docData.title}" å·²æˆåŠŸæ·»åŠ åˆ°çŸ¥è¯†åº“ä¸­ã€‚<br>
                        <small>æ‚¨å¯ä»¥åœ¨çŸ¥è¯†åº“æ–‡æ¡£ç®¡ç†é¡µé¢æŸ¥çœ‹å’Œç®¡ç†æ­¤æ–‡æ¡£ã€‚</small>
                    `;
                    
                    setTimeout(() => {
                        statusDiv.remove();
                    }, 5000);
                }
            }, 500);
        }

        function downloadText() {
            if (!transcriptionResult) {
                alert('æ²¡æœ‰å¯ä¸‹è½½çš„æ–‡æœ¬å†…å®¹');
                return;
            }

            const title = document.getElementById('docTitle').value || 'éŸ³é¢‘è½¬å½•';
            const blob = new Blob([transcriptionResult], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${title}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function copyText() {
            if (!transcriptionResult) {
                alert('æ²¡æœ‰å¯å¤åˆ¶çš„æ–‡æœ¬å†…å®¹');
                return;
            }

            const textarea = document.getElementById('transcriptionText');
            textarea.select();
            document.execCommand('copy');
            
            showSuccess('æ–‡æœ¬å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
        }

        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.innerHTML = `<strong>âœ…</strong> ${message}`;
            
            const firstSection = document.querySelector('.upload-section');
            firstSection.parentNode.insertBefore(successDiv, firstSection);
            
            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        }

        // å®æ—¶è¯­éŸ³è¯†åˆ«ï¼ˆæ¨¡æ‹Ÿï¼‰
        function startRealTimeRecognition() {
            if (!recognition) {
                // æ¨¡æ‹Ÿè¯­éŸ³è¯†åˆ«API
                recognition = {
                    start: function() {
                        console.log('å¼€å§‹å®æ—¶è¯­éŸ³è¯†åˆ«');
                        isRecording = true;
                    },
                    stop: function() {
                        console.log('åœæ­¢å®æ—¶è¯­éŸ³è¯†åˆ«');
                        isRecording = false;
                    }
                };
            }
            
            recognition.start();
            
            // æ¨¡æ‹Ÿå®æ—¶è½¬å½•
            const realTimeInterval = setInterval(() => {
                if (!isRecording) {
                    clearInterval(realTimeInterval);
                    return;
                }
                
                // æ¨¡æ‹Ÿå®æ—¶è½¬å½•æ–‡æœ¬
                const realTimeText = 'è¿™æ˜¯å®æ—¶è¯­éŸ³è¯†åˆ«çš„æ¨¡æ‹Ÿç»“æœã€‚';
                document.getElementById('transcriptionText').value += realTimeText;
                updateTextStats(document.getElementById('transcriptionText').value);
            }, 3000);
        }
    </script>
</body>
</html>